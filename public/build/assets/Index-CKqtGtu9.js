import{m as B,n as E,a as M,o as N,b as S,d as a,e as o,j as c,w as x,u as l,f as s,F as i,i as T,k as b,t as F,p as k,v as A,l as P}from"./app-nCt8bXOo.js";import{u as R,_ as j}from"./mappers-kFMuYTL4.js";import{p as g}from"./propertyValues-djaM6W9j.js";import{u as q}from"./useUploadFile-CccU5wrL.js";const I=s("h3",{class:"my-4"},"User edit",-1),L={class:"row mt-5"},$={class:"col-sm-5"},z={class:"col-sm-7"},G={class:"form-group row mb-2 mt-2"},H={class:"col-md-6"},J=["onUpdate:modelValue","placeholder"],K={key:1},O={key:2},ee={__name:"Index",setup(Q){const p=P(),V=B(),D=E(),{uploadedFile:m,uploadFile:_}=q(),{uuid:u}=V.params,n=M({}),h=["first_name","last_name","email","phone","position_id"],f=()=>{const t=new FormData;return t.append("_method","PUT"),h.forEach(r=>{t.append(r,n.value[r])}),m.value!==null&&t.append("avatar",m.value),t},y=()=>{p.dispatch("user/showUserAsync",{uuid:u}).then(t=>{n.value=R(t.data.user)})},C=()=>{p.dispatch("user/updateUserAsync",{uuid:u,data:f()}).then(()=>{D.push({name:"user-index"})}),console.log("Update: ",f())};return N(y),(t,r)=>{const v=S("router-link");return a(),o(i,null,[I,c(v,{to:{name:"user-index"}},{default:x(()=>[b("Users")]),_:1}),c(v,{to:{name:"user-show",params:{uuid:l(u)}},class:"ms-4"},{default:x(()=>[b("Show")]),_:1},8,["to"]),s("dl",L,[(a(!0),o(i,null,T(n.value,(U,e)=>{var w;return a(),o(i,{key:e},[s("dt",$,F(((w=l(g)[e])==null?void 0:w.label)??e),1),s("dd",z,[s("div",G,[s("div",H,[h.includes(e)?k((a(),o("input",{key:0,type:"text","onUpdate:modelValue":d=>n.value[e]=d,name:"email",class:"form-control",placeholder:l(g)[e].label,required:"",autofocus:""},null,8,J)),[[A,n.value[e]]]):e==="avatar"?(a(),o("dd",K,[c(j,{avatar:U,"show-info":""},null,8,["avatar"]),s("input",{class:"form-control mt-3",type:"file",id:"formFile",onChange:r[0]||(r[0]=(...d)=>l(_)&&l(_)(...d))},null,32)])):(a(),o("span",O,F(U),1))])])])],64)}),128))]),s("a",{href:"#",class:"btn btn-primary btn-sm",onClick:C},"Update")],64)}}};export{ee as default};
