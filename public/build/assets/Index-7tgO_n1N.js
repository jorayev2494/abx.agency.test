import{u as B,_ as P}from"./mappers-kFMuYTL4.js";import{r as S,a as V,c as D,o as E,b as k,d as a,e as o,f as e,t as l,g as v,w as m,h as p,F as h,i as F,j as g,k as y,u as C,l as M}from"./app-nCt8bXOo.js";import{i as x}from"./index-DHf2ZoRB.js";const T={class:"my-4"},$={class:"table"},j=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Full Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Created At"),e("th",{scope:"col"},"Updated At"),e("th",{scope:"col"},"Actions")])],-1),I={scope:"row"},L=["onClick"],q=["disabled"],z=["disabled"],Q={__name:"Index",setup(G){const _=M(),s=S({page:null,next_url:null,prev_url:null}),r=V([]),c=(u={})=>{_.dispatch("user/loadUsersAsync",{params:u}).then(i=>{const{users:n,page:b,links:{next_url:t,prev_url:d}}=i.data;s.page=b,s.next_url=t,s.prev_url=d,r.value=n.map(B)})},A=()=>{s.page++,c({page:s.page})},w=()=>{s.page--,c({page:s.page})},U=()=>{r.value=[],c()},N=({uuid:u,full_name:i})=>{confirm(`Are you sure?\r
Do you want delete the user '${i}'`)&&_.dispatch("user/deleteUsersAsync",{uuid:u}).then(U)},f=D(()=>_.getters.getAccessToken!==null);return E(c),(u,i)=>{const n=k("router-link"),b=k("center");return a(),o(h,null,[e("h3",T,"Users ("+l(r.value.length)+")",1),f.value?(a(),v(n,{key:0,to:{name:"user-create"},class:"btn btn-sm btn-primary"},{default:m(()=>[y(" Create ")]),_:1})):p("",!0),e("table",$,[j,e("tbody",null,[(a(!0),o(h,null,F(r.value,(t,d)=>(a(),o("tr",{key:++d},[e("th",I,l(d),1),e("td",null,[g(P,{avatar:t.avatar},null,8,["avatar"]),e("p",null,l(t.full_name),1)]),e("td",null,l(t.email),1),e("td",null,l(t.created_at),1),e("td",null,l(t.updated_at),1),e("td",null,[g(n,{class:"btn btn-primary btn-sm me-2",to:{name:"user-show",params:{uuid:t.uuid}}},{default:m(()=>[y("Show")]),_:2},1032,["to"]),f.value?(a(),o(h,{key:0},[C(x)(t)?p("",!0):(a(),v(n,{key:0,class:"btn btn-success btn-sm me-2",to:{name:"user-edit",params:{uuid:t.uuid}}},{default:m(()=>[y("Edit")]),_:2},1032,["to"])),C(x)(t)?p("",!0):(a(),o("button",{key:1,type:"submit",class:"btn btn-danger btn-sm",onClick:H=>N(t)},"Delete",8,L))],64)):p("",!0)])]))),128))])]),g(b,null,{default:m(()=>[e("button",{type:"submit",class:"align-items-center btn btn-primary btn-sm mt-4 mb-2 me-1",disabled:s.prev_url===null,onClick:w},"Prev page",8,q),e("button",{type:"submit",class:"align-items-center btn btn-primary btn-sm mt-4 mb-2 ms-1",disabled:s.next_url===null,onClick:A},"Next Page (Show more)",8,z)]),_:1})],64)}}};export{Q as default};
